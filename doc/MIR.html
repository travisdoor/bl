<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Biscuit-MIR Documentation</title>
<!-- 2019-01-24 Čt 15:13 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Martin Dorazil" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="org.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Biscuit-MIR Documentation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. About</a>
<ul>
<li><a href="#sec-1-1">1.1. MIR Interpreter</a></li>
<li><a href="#sec-1-2">1.2. Assert function in MIR</a></li>
<li><a href="#sec-1-3">1.3. Stack manipulation</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Function</a></li>
<li><a href="#sec-3">3. Block</a></li>
<li><a href="#sec-4">4. Instructions:</a>
<ul>
<li><a href="#sec-4-1">4.1. const</a></li>
<li><a href="#sec-4-2">4.2. decl</a></li>
<li><a href="#sec-4-3">4.3. load</a></li>
<li><a href="#sec-4-4">4.4. store</a></li>
<li><a href="#sec-4-5">4.5. arg</a></li>
<li><a href="#sec-4-6">4.6. call</a></li>
<li><a href="#sec-4-7">4.7. ret</a></li>
<li><a href="#sec-4-8">4.8. br</a></li>
<li><a href="#sec-4-9">4.9. br (conditional)</a></li>
<li><a href="#sec-4-10">4.10. unreachable</a></li>
<li><a href="#sec-4-11">4.11. binop</a></li>
<li><a href="#sec-4-12">4.12. unop</a></li>
<li><a href="#sec-4-13">4.13. elemptr</a></li>
<li><a href="#sec-4-14">4.14. addrof</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Special instructions</a>
<ul>
<li><a href="#sec-5-1">5.1. tryinfer</a></li>
<li><a href="#sec-5-2">5.2. validate_type</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> About</h2>
<div class="outline-text-2" id="text-1">
<p>
BL-MIR (Biscuit Language Middle Intermediate Representation) is a simplified representation of the Biscuit Language created from AST. It is located between AST and LLVM-IR. 
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> MIR Interpreter</h3>
<div class="outline-text-3" id="text-1-1">
<p>
BL Compiler has integrated interpreter for MIR. 
</p>

<ul class="org-ul">
<li>Default execution stack size is 2MB.
</li>
<li>Stack allocations are 8 byte aligned.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Assert function in MIR</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">

<pre class="src src-blm"><span class="org-function-name">@assert</span> fn(<span class="org-type">bool</span>) <span class="org-type">void</span> {
<span class="org-constant">init_0</span>:
  <span class="org-constant">%0</span>              *<span class="org-type">bool</span> <span class="org-keyword">decl</span> cond : <span class="org-type">bool</span>
  %1               <span class="org-type">bool</span> <span class="org-keyword">arg</span> $0
  %3               <span class="org-type">void</span> <span class="org-keyword">store</span> %1 -&gt; %0
  %11              <span class="org-type">void</span> <span class="org-keyword">br</span> entry_1

<span class="org-constant">entry_1</span>:
  %5               <span class="org-type">bool</span> <span class="org-keyword">load</span> %0
  %6               <span class="org-type">bool</span> <span class="org-keyword">unop</span> !%5
  <span class="org-constant">%7</span>               <span class="org-type">void</span> <span class="org-keyword">br</span> %6 ? if_then_2 : if_else_3

<span class="org-constant">if_then_2</span>:
  %8               <span class="org-type">void</span> <span class="org-keyword">unreachable</span>
  %9               <span class="org-type">void</span> <span class="org-keyword">br</span> if_cont_4

<span class="org-constant">if_else_3</span>:
  %10              <span class="org-type">void</span> <span class="org-keyword">br</span> if_cont_4

<span class="org-constant">if_cont_4</span>:
  %12              <span class="org-type">void</span> <span class="org-keyword">ret</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Stack manipulation</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Example function:
</p>
<div class="org-src-container">

<pre class="src src-bl"><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>
<span class="org-function-name">main</span> :: <span class="org-keyword">fn</span> () <span class="org-type">s32</span> {
  <span class="org-constant">v</span> :: <span class="org-constant">10</span>;
  <span class="org-function-name">assert</span>(v == <span class="org-constant">10</span>);
  <span class="org-keyword">return</span> <span class="org-constant">0</span>;
};
</pre>
</div>

<p>
Stack operation produced during execution of the main function:
</p>
<pre class="example">
executing 'main' in compile time...
     -             Terminal  PUSH RA
    10         InstrDeclVar  PUSH    (4B, 0x7f377a17a060) s32
    11           InstrConst  PUSH    (4B, 0x7f377a17a068) s32
    13           InstrStore  POP     (4B, 0x7f377a17a06c) s32
    15           InstrConst  PUSH    (4B, 0x7f377a17a068) s32
    17            InstrLoad  PUSH    (4B, 0x7f377a17a070) s32
    18           InstrBinop  POP     (4B, 0x7f377a17a074) s32
    18           InstrBinop  POP     (4B, 0x7f377a17a06c) s32
    18           InstrBinop  PUSH    (1B, 0x7f377a17a068) bool
    19            InstrCall  PUSH RA
    87         InstrDeclVar  PUSH    (1B, 0x7f377a17a088) bool
    88             InstrArg  PUSH    (1B, 0x7f377a17a090) bool
    90           InstrStore  POP     (1B, 0x7f377a17a097) bool
    96            InstrLoad  PUSH    (1B, 0x7f377a17a090) bool
    97            InstrUnop  POP     (1B, 0x7f377a17a097) bool
    97            InstrUnop  PUSH    (1B, 0x7f377a17a090) bool
    98          InstrCondBr  POP     (1B, 0x7f377a17a097) bool
   104             InstrRet  POP RA
   104             InstrRet  POP     (1B, 0x7f377a17a06f) bool
    20           InstrConst  PUSH    (4B, 0x7f377a17a068) s32
    21             InstrRet  POP     (4B, 0x7f377a17a06c) s32
    21             InstrRet  POP RA
execution finished with state: 0
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Function</h2>
<div class="outline-text-2" id="text-2">
<pre class="example">
@&lt;name&gt; &lt;T&gt; { 
  [entry block]
}
</pre>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Block</h2>
<div class="outline-text-2" id="text-3">
<p>
Basic block representation.
</p>

<pre class="example">
&lt;name&gt;: 
  ...
  &lt;terminal instruction&gt;
</pre>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Instructions:</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> const</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Constant value.
</p>

<pre class="example">
&lt;T&gt; const &lt;value&gt; // yields constant value of the type T
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">PUSH</td>
<td class="left">value</td>
<td class="left">constant value</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> decl</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Variable declaration.
</p>

<pre class="example">
&lt;*T&gt; decl &lt;name&gt; : &lt;T&gt; // yields *T (pointer to value allocated on the stack)
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">PUSH</td>
<td class="left">-</td>
<td class="left">storage for the variable</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> load</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Push pointed value on the stack.
</p>

<pre class="example">
&lt;T&gt; load &lt;ptr&gt; // yields T loaded from ptr
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">ptr</td>
<td class="left">pointer to source</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">value</td>
<td class="left">value loaded from source</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> store</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Store value from source to destination address.
</p>

<pre class="example">
void store &lt;src&gt; -&gt; &lt;dest ptr&gt; // yields void
</pre>

<p>
Destination pointer is on the stack:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">dest ptr</td>
<td class="left">pointer to destination</td>
</tr>

<tr>
<td class="left">POP</td>
<td class="left">src ptr</td>
<td class="left">value</td>
</tr>
</tbody>
</table>

<p>
Destination pointer is declaration:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">src ptr</td>
<td class="left">value</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> arg</h3>
<div class="outline-text-3" id="text-4-5">
<p>
Load argument of the current function on the stack.
</p>

<pre class="example">
&lt;T&gt; arg $&lt;arg number&gt; // yields T
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">PUSH</td>
<td class="left">arg</td>
<td class="left">fn argument</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> call</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Call function. This instruction will create new stack frame and switch control to the callee.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">PUSH</td>
<td class="left">arg 3</td>
<td class="left">push 3rd argument</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">arg 2</td>
<td class="left">push 2nd argument</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">arg 1</td>
<td class="left">push 1st argument</td>
</tr>

<tr>
<td class="left">PUSH RA</td>
<td class="left">pc, call ptr</td>
<td class="left">create new frame stack (push program counter and call instruction pointer)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> ret</h3>
<div class="outline-text-3" id="text-4-7">
<p>
Return value from the function and return control to the caller. This instruction terminates current basic block.
</p>

<pre class="example">
void ret [value] // yields void
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP RA</td>
<td class="left">-</td>
<td class="left">rollback the stack to return address</td>
</tr>

<tr>
<td class="left">POP</td>
<td class="left">arg 1</td>
<td class="left">clenup fn argument</td>
</tr>

<tr>
<td class="left">POP</td>
<td class="left">arg 2</td>
<td class="left">clenup fn argument</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">value</td>
<td class="left">push call result value if there is one</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> br</h3>
<div class="outline-text-3" id="text-4-8">
<p>
Breaks to the basic block. This instruction terminates current basic block.
</p>

<pre class="example">
void br &lt;block&gt; // yields void
</pre>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> br (conditional)</h3>
<div class="outline-text-3" id="text-4-9">
<p>
Breaks into then block if the condition is true. This instruction terminates current basic block.
</p>

<pre class="example">
void br &lt;cont&gt; ? &lt;then_block&gt; : &lt;else_block&gt; // yields void
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">condition</td>
<td class="left">checked condition</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> unreachable</h3>
<div class="outline-text-3" id="text-4-10">
<p>
Abort execution when this instruction is reached.
</p>
</div>
</div>

<div id="outline-container-sec-4-11" class="outline-3">
<h3 id="sec-4-11"><span class="section-number-3">4.11</span> binop</h3>
<div class="outline-text-3" id="text-4-11">
<p>
Binary operation.
</p>

<pre class="example">
&lt;T&gt; binop &lt;lhs&gt; &lt;+|-|*|/|%&gt; &lt;rhs&gt; // yields result value of type T
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">lhs</td>
<td class="left">left-hand side of operation</td>
</tr>

<tr>
<td class="left">POP</td>
<td class="left">rhs</td>
<td class="left">right-hand side of operation</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">result</td>
<td class="left">result value of the operation</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-12" class="outline-3">
<h3 id="sec-4-12"><span class="section-number-3">4.12</span> unop</h3>
<div class="outline-text-3" id="text-4-12">
<p>
Unary operation.
</p>

<pre class="example">
&lt;T&gt; unop &lt;+|-|*|&amp;&gt; &lt;value&gt; // yields result value of type T
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">value</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">result</td>
<td class="left">result value of the operation</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-13" class="outline-3">
<h3 id="sec-4-13"><span class="section-number-3">4.13</span> elemptr</h3>
<div class="outline-text-3" id="text-4-13">
<p>
Evaluates address of the array element and push it on the stack.
</p>

<pre class="example">
&lt;*T&gt; elemptr &lt;arr ptr&gt;[&lt;index&gt;] // yields result address *T (elem type)
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">POP</td>
<td class="left">index</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">PUSH</td>
<td class="left">elem ptr</td>
<td class="left">Address of the array element</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-14" class="outline-3">
<h3 id="sec-4-14"><span class="section-number-3">4.14</span> addrof</h3>
<div class="outline-text-3" id="text-4-14">
<p>
Evaluates address of the variable.
</p>

<p>
Getting address of variable:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">stack op</th>
<th scope="col" class="left">data</th>
<th scope="col" class="left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">PUSH</td>
<td class="left">var ptr</td>
<td class="left">pointer to allocated variable</td>
</tr>
</tbody>
</table>

<p>
Skipped when address has been pushed by previous instruction (ex.: 'elemptr').
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Special instructions</h2>
<div class="outline-text-2" id="text-5">
<p>
Special instructions are used only during analyze pass inside the compiler.
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> tryinfer</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Assign type of the source to the destination instruction.
</p>

<pre class="example">
void tryinfer &lt;src&gt; -&gt; &lt;dest&gt; // yields void
</pre>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> validate_type</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Validates if the source instruction yields value of type 'type'. 
</p>

<pre class="example">
void validate_type &lt;src&gt; // yields void
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Martin Dorazil</p>
<p class="date">Created: 2019-01-24 Čt 15:13</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.2.2 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
